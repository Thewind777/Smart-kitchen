(self.webpackChunkapp_project = self.webpackChunkapp_project || []).push([
    [5491], {
        8983: function(e, n, t) {
            "use strict";
            t.d(n, {
                S: function() {
                    return o
                }
            });
            var i = t(64467);

            function a(e, n) {
                var t = Object.keys(e);
                if (Object.getOwnPropertySymbols) {
                    var i = Object.getOwnPropertySymbols(e);
                    n && (i = i.filter(function(n) {
                        return Object.getOwnPropertyDescriptor(e, n).enumerable
                    })), t.push.apply(t, i)
                }
                return t
            }

            function s(e) {
                for (var n = 1; n < arguments.length; n++) {
                    var t = null != arguments[n] ? arguments[n] : {};
                    n % 2 ? a(Object(t), !0).forEach(function(n) {
                        (0, i.A)(e, n, t[n])
                    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : a(Object(t)).forEach(function(n) {
                        Object.defineProperty(e, n, Object.getOwnPropertyDescriptor(t, n))
                    })
                }
                return e
            }

            function o() {
                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                if ("geolocation" in navigator && "https:" === location.protocol) {
                    var n = {
                        maximumAge: 3e5,
                        timeout: 1e4
                    };
                    return new Promise(function(t, i) {
                        navigator.geolocation.getCurrentPosition(t, i, s(s({}, n), e))
                    })
                }
            }
        },
        39121: function(e, n, t) {
            "use strict";
            t.r(n), t.d(n, {
                default: function() {
                    return h
                }
            });
            var i = t(45458),
                a = t(23029),
                s = t(92901),
                o = t(50388),
                p = t(53954),
                r = t(15361),
                d = t(57467),
                c = t(27848),
                l = t(67303),
                _ = t(2078);

            function v() {
                try {
                    var e = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}))
                } catch (e) {}
                return (v = function() {
                    return !!e
                })()
            }
            var u = null,
                h = function(e) {
                    function n(e) {
                        var t, i, s, r;
                        return (0, a.A)(this, n), i = this, s = n, r = [e], s = (0, p.A)(s), (t = (0, o.A)(i, v() ? Reflect.construct(s, r || [], (0, p.A)(i).constructor) : s.apply(i, r))).$storeSelectionLayer = document.querySelector(t.SELECTORS.storeSelectionModal), t.$storeSelectionButton = document.querySelector(t.SELECTORS.storeSelectionButton), t.$options.handler && (t.$on("click", t.onClickHandler.bind(t)), "button" === t.$el.role && (t.$el.addEventListener("keydown", function(e) {
                            t.actionButtonKeydownHandler(e)
                        }), t.$el.addEventListener("keyup", function(e) {
                            t.actionButtonKeyupHandler(e)
                        }))), t.$options.expandible && !t.$el.classList.contains("refinement-title") && (t.$el.ariaExpanded = !1), t.$options.filterbar && document.querySelector(".nds") && t.$on("click", t.onFilterbarClickHandler.bind(t)), t.closeBtn = t.$el.querySelector(t.SELECTORS.closeDropdownBtn), t.closeBtn && t.closeBtn.addEventListener("click", function() {
                            t.pushCloseEventToDatalayer(), t.remove()
                        }), t.$el.addEventListener("keydown", function(e) {
                            "Escape" === e.key && (t.pushCloseEventToDatalayer(), t.remove())
                        }), t
                    }
                    return (0, r.A)(n, e), (0, s.A)(n, [{
                        key: "SELECTORS",
                        get: function() {
                            return {
                                infoStrip: ".information-strip.is-visible",
                                mainHeader: "header.header",
                                closeDropdownBtn: ".js-toggle-close",
                                filtersDropdownBtn: ".js-filter-toggle-close",
                                storeSelectionModal: "#store-selection-bar",
                                storeSelectionButton: "#store-selection-button",
                                isApp: ".mobile-layout"
                            }
                        }
                    }, {
                        key: "CLASSES",
                        get: function() {
                            return {
                                isCollapsedClass: "toggleActive",
                                shippingCostButton: "info-shipping-costs-btn"
                            }
                        }
                    }, {
                        key: "componentsEls",
                        get: function() {
                            return this._handlerName || (this._handlerName = this.$options.name), this._relatedEls = document.querySelectorAll("[data-option-name=".concat(this._handlerName, "]")), this._relatedEls
                        }
                    }, {
                        key: "closeComponentsEls",
                        get: function() {
                            return !this._closeHandlerName && this.$options.close && (this._closeHandlerName = this.$options.close), this._closeRelatedEls = document.querySelectorAll("[data-option-name=".concat(this._closeHandlerName, "]")), this._closeRelatedEls
                        }
                    }, {
                        key: "onClickHandler",
                        value: function(e) {
                            if (!(window.isMobile() && this.$options.desktopOnly || document.querySelector("body").classList.contains("cart") && "minicartLayer" == this.$options.name))
                                if (this.$el.classList.contains(this.CLASSES.isCollapsedClass)) this.pushCloseEventToDatalayer(), this.remove();
                                else {
                                    if (this.add(), "minicartLayer" == this.$options.name) {
                                        this.EMIT(this.CUSTOM_MESSAGES.UPDATE_CART_EVENTS.loadMinicart, {
                                            eventSend: !0
                                        });
                                        var n = document.querySelector(".minicart-sidebar");
                                        this.trap = _.K(n, {
                                            initialFocus: n,
                                            clickOutsideDeactivates: !0
                                        }), this.trap.activate()
                                    }
                                    var t;
                                    if ("openStoresList-pickup_in_store" == this.$options.name && "pickup_in_store" == this.$options.service) null === (t = document.querySelector(".back-to-services.description.toggleActive.openStoresList-pickup_in_store")) || void 0 === t || t.focus()
                                }
                        }
                    }, {
                        key: "onFilterbarClickHandler",
                        value: function(e) {
                            var n = this,
                                t = e.target.closest(".refinements.accordion"),
                                i = t ? t.querySelectorAll(".refinement-block") : null;
                            i && window.isDesktop() && i.forEach(function(t) {
                                var i = t.querySelector(".refinement-title"),
                                    a = "";
                                i && (a = i.getAttribute("data-option-name") || "");
                                var s = e.target.getAttribute("data-option-name") || "";
                                a && s && a !== s && (i.classList.remove(n.CLASSES.isCollapsedClass), n.$options.expandible ? (i.ariaExpanded = !0, (i.classList.contains("show-hide-refinements") || i.classList.contains("js-sortrule-value")) && (i.ariaExpanded = !1)) : i.ariaPressed = !1, t.querySelector(".refinement-list") && t.querySelector(".refinement-list").classList.remove(n.CLASSES.isCollapsedClass))
                            })
                        }
                    }, {
                        key: "remove",
                        value: function() {
                            var e = this;
                            "storeLayer" == this.$options.name && (u && u.deactivate(), this.$storeSelectionLayer && (this.$storeSelectionLayer.ariaModal = !1, this.$storeSelectionLayer.removeAttribute("tabindex")), window._uxa = window._uxa || [], window._uxa.push(["trackPageview", window.location.pathname + window.location.hash.replace("#", "?__")]), (0, l.v)({
                                action: "CLOSE_STORELAYER"
                            })), !this.$options.name.includes("deliveryToggle") || "BUTTON" !== this.$el.tagName && "button" !== this.$el.role || (this.$options.expandible ? (this.$el.ariaExpanded = !0, (this.$el.classList.contains("show-hide-refinements") || this.$el.classList.contains("js-sortrule-value")) && (this.$el.ariaExpanded = !1)) : this.$el.ariaPressed = !1, this.$el.ariaDisabled = !1, this.$el.tabIndex = 0), "minicartLayer" == this.$options.name && this.EMIT(this.CUSTOM_MESSAGES.UPDATE_CART_EVENTS.closeMinicart), "sidebarLayer" == this.$options.name && document.querySelector(this.SELECTORS.isApp) && (0, l.v)({
                                action: "SHOW_HEADER"
                            }), this.$options.backdrop && this.EMIT(this.CUSTOM_MESSAGES.BACKDROP_EVENTS.animate, {
                                action: close
                            }), this.$options.delay && setTimeout(function() {
                                document.body.classList.remove(e.$options.delayname)
                            }, parseInt(this.$options.delay)), document.body.classList.remove(this.$options.name), this.componentsEls.forEach(function(n) {
                                n.classList.remove(e.CLASSES.isCollapsedClass), "BUTTON" === n.tagName && (e.$options.expandible ? (n.ariaExpanded = !0, (n.classList.contains("show-hide-refinements") || n.classList.contains("info-shipping-costs-btn") || n.classList.contains("js-sortrule-value")) && (n.ariaExpanded = !1)) : n.ariaPressed = !1)
                            }), "storeLayer" == this.$options.name && this.$storeSelectionButton && setTimeout(function() {
                                e.$storeSelectionButton.focus()
                            }, 200)
                        }
                    }, {
                        key: "closeOtherDeliveryToggles",
                        value: function(e) {
                            var n = this;
                            (0, i.A)(document.querySelectorAll("[data-option-name^=deliveryToggle-]")).forEach(function(t) {
                                t.getAttribute("data-option-name") != e && (t.classList.remove(n.CLASSES.isCollapsedClass), "BUTTON" !== t.tagName && "button" !== t.role || (n.$options.expandible ? t.ariaExpanded = !1 : t.ariaPressed = !1, t.ariaDisabled = !1, t.tabIndex = 0))
                            })
                        }
                    }, {
                        key: "add",
                        value: function() {
                            var e = this;
                            if ("storeLayer" == this.$options.name || "delivery-cost-info" == this.$options.name) {
                                var n = {
                                    event: "button_click",
                                    type: "generic_button",
                                    area: "spalla",
                                    action: "button_click"
                                };
                                n.text = "storeLayer" == this.$options.name ? "Open" : this.$el.textContent || "Spese di spedizione", "storeLayer" == this.$options.name && (this.$storeSelectionLayer && (this.$storeSelectionLayer.ariaModal = !0, this.$storeSelectionLayer.setAttribute("tabindex", "-1")), window._uxa = window._uxa || [], window._uxa.push(["trackPageview", window.location.pathname + window.location.hash.replace("#", "?__") + "?cs-popin-metodo-di-consegna"]), (0, l.v)({
                                    action: "OPEN_STORELAYER"
                                }));
                                var t = this.$options.shippingSelectedCap,
                                    i = this.$options.selectedStoreId;
                                if ("delivery-cost-info" == this.$options.name) {
                                    var a = this.$el.closest(this.SELECTORS.storeSelectionModal);
                                    t = t || (null == a ? void 0 : a.getAttribute("data-option-shipping-selected-cap")), i = i || (null == a ? void 0 : a.getAttribute("data-option-selected-store-id"))
                                }
                                t && "null" !== t && (n.s_store_zipCode = t), t && "null" !== t && i && "null" !== i && (n.s_store_id = i), window.dataLayer.push(n)
                            }
                            if (this.$options.name.includes("deliveryToggle") && ("BUTTON" !== this.$el.tagName && "button" !== this.$el.role || this.$el.closest(".franchise-service-card") || (this.$options.expandible ? (this.$el.ariaExpanded = !1, (this.$el.classList.contains("show-hide-refinements") || this.$el.classList.contains("js-sortrule-value")) && (this.$el.ariaExpanded = !0)) : this.$el.ariaPressed = !0, this.$el.ariaDisabled = !0, this.$el.tabIndex = -1), this.closeOtherDeliveryToggles(this.$options.name)), this.$options.expandible && (this.$el.ariaExpanded = !0), this.$options.gaeventcategory && this.$options.gaeventaction && this.EMIT(this.CUSTOM_MESSAGES.TRACKING_EVENTS.update, {
                                    eventCategory: this.$options.gaeventcategory,
                                    eventAction: this.$options.gaeventaction,
                                    eventLabel: this.$options.gaeventlabel ? this.$options.gaeventlabel : ""
                                }), this.$options.trackingArea && this.$options.trackingType && this.$options.trackingAction && this.$options.trackingText && this.EMIT(this.CUSTOM_MESSAGES.TRACKING_EVENTS.update, {
                                    area: this.$options.trackingArea,
                                    type: this.$options.trackingType,
                                    action: this.$options.trackingAction,
                                    text: this.$options.trackingText
                                }), this.$options.service) {
                                var s = {
                                    event: "choose_delivery_method",
                                    area: "spalla",
                                    label: this.$options.service
                                };
                                this.$options.shippingSelectedCap && (s.s_store_zipCode = this.$options.shippingSelectedCap), window.dataLayer.push(s)
                            }!this.$options.backdrop || document.querySelector(this.SELECTORS.isApp) && "storeLayer" == this.$options.name || this.EMIT(this.CUSTOM_MESSAGES.BACKDROP_EVENTS.animate, {
                                action: open
                            }), this.$options.delay && document.body.classList.add(this.$options.delayname), document.body.classList.add(this.$options.name), this.$options.moveInfostrip && document.querySelector(this.SELECTORS.infoStrip) && (window.scrollTo(0, 0), document.querySelector(this.SELECTORS.mainHeader).classList.add("moveinfostrip"), (0, c.YW)(null, "md") && document.querySelector(".page").insertBefore(document.querySelector(this.SELECTORS.infoStrip), document.querySelector(".page").firstChild)), document.querySelector(this.SELECTORS.isApp) && "storeLayer" == this.$options.name || this.componentsEls.forEach(function(n) {
                                (n.classList.add(e.CLASSES.isCollapsedClass), "BUTTON" !== n.tagName || n.classList.contains("minicart-close") || (e.$options.expandible ? (n.ariaExpanded = !1, (n.classList.contains("show-hide-refinements") || n.classList.contains("info-shipping-costs-btn") || n.classList.contains("js-sortrule-value")) && (n.ariaExpanded = !0)) : n.ariaPressed = !0), n.dataset.elfocus) && document.querySelector(n.dataset.elfocus).focus()
                            }), this.$options.close && (document.body.classList.remove(this.$options.close), this.closeComponentsEls.forEach(function(n) {
                                n.classList.remove(e.CLASSES.isCollapsedClass), "BUTTON" === n.tagName && (e.$options.expandible ? (n.ariaExpanded = !0, (n.classList.contains("show-hide-refinements") || n.classList.contains("info-shipping-costs-btn") || n.classList.contains("js-sortrule-value")) && (n.ariaExpanded = !1)) : n.ariaPressed = !1)
                            })), "storeLayer" == this.$options.name && this.$storeSelectionLayer && setTimeout(function() {
                                e.$storeSelectionLayer.focus(), (u = _.K(e.$storeSelectionLayer, {
                                    clickOutsideDeactivates: !0
                                })).activate()
                            }, 500)
                        }
                    }, {
                        key: "actionButtonKeydownHandler",
                        value: function(e) {
                            32 === e.keyCode ? e.preventDefault() : 13 === e.keyCode && (e.preventDefault(), this.onClickHandler())
                        }
                    }, {
                        key: "actionButtonKeyupHandler",
                        value: function(e) {
                            32 === e.keyCode && (e.preventDefault(), this.onClickHandler())
                        }
                    }, {
                        key: "pushCloseEventToDatalayer",
                        value: function() {
                            if ("storeLayer" == this.$options.name) {
                                var e = {
                                    event: "button_click",
                                    type: "generic_button",
                                    area: "spalla",
                                    action: "button_click",
                                    text: "Close"
                                };
                                this.$options.shippingSelectedCap && (e.s_store_zipCode = this.$options.shippingSelectedCap), this.$options.shippingSelectedCap && this.$options.selectedStoreId && (e.s_store_id = this.$options.selectedStoreId), window.dataLayer.push(e)
                            }
                        }
                    }])
                }(d.A)
        },
        46749: function(module) {
            module.exports = function anonymous(locals, escapeFn, include, rethrow) {
                rethrow = rethrow || function(e, n, t, i, a) {
                    var s = n.split("\n"),
                        o = Math.max(i - 3, 0),
                        p = Math.min(s.length, i + 3),
                        r = a(t),
                        d = s.slice(o, p).map(function(e, n) {
                            var t = n + o + 1;
                            return (t == i ? " >> " : "    ") + t + "| " + e
                        }).join("\n");
                    throw e.path = r, e.message = (r || "ejs") + ":" + i + "\n" + d + "\n\n" + e.message, e
                }, escapeFn = escapeFn || function(e) {
                    return null == e ? "" : String(e).replace(_MATCH_HTML, encode_char)
                };
                var _ENCODE_HTML_RULES = {
                        "&": "&amp;",
                        "<": "&lt;",
                        ">": "&gt;",
                        '"': "&#34;",
                        "'": "&#39;"
                    },
                    _MATCH_HTML = /[&<>'"]/g;

                function encode_char(e) {
                    return _ENCODE_HTML_RULES[e] || e
                }
                var __line = 1,
                    __lines = '<div class="scrollable-list">\n  <% if (typeof services!=\'undefined\' && services.length > 0) { %>\n  <p class="section-title method-label" tabindex="-1">Quale metodo preferisci?</p>\n  <% services.forEach(function(service, index){ %>\n  <div class="store-service-card <%= service.shippingMethodId %> <%= isTherePickupInStore && service.shippingMethodId == \'pickup_in_store\' ? \'last-service\' : !isTherePickupInStore && index + 1 === services.length ? \'last-service\' : \'\' %>">\n      <p class="service-title"><%= service.shippingMethodName %></p>\n      <p class="service-shordescription"><%- service.shippingMethodDescription %></p>\n      <img src="<%= service.icon %>" alt="" />\n      <% if(service.extraDescription) { %>\n      <div class="extra-description">\n          <input id="<%=service.shippingMethodId %>" class="checkbox" type="checkbox" />\n          <label for="<%=service.shippingMethodId %>" class="icon icon-info trigger-extradescription"></label>\n          <p class="extradescription"><%= service.extraDescription%></p>\n      </div>\n      <% } %> <% if (service.hasExtraDeliveryServices) { %>\n      <button type="button" class="select-service" data-component="togglerComponent" data-option-name="openExtraLayer-<%= service.shippingMethodId %>" data-option-service="<%= service.shippingMethodId %>" data-option-shipping-selected-cap="<%= service.cap %>" data-option-selected-store-id="<%= storeIdSelected %>" data-option-handler="true">\n          Seleziona\n      </button>\n      <% } else if (service.storesFranchising && service.storesFranchising.length > 0) { %>\n        <button type="button" class="select-service" data-component="togglerComponent" data-option-name="openStoresListFranchising" data-option-service="<%= service.shippingMethodId %>" data-option-shipping-selected-cap="<%= service.cap %>" data-option-selected-store-id="<%= storeIdSelected %>" data-option-handler="true">\n            Seleziona\n        </button>\n      <% } else if (service.stores && service.stores.length > 0) { %>\n      <button type="button" class="select-service" data-component="togglerComponent" data-option-name="openStoresList-<%= service.shippingMethodId %>" data-option-service="<%= service.shippingMethodId %>" data-option-shipping-selected-cap="<%= service.cap %>" data-option-selected-store-id="<%= storeIdSelected %>" data-option-handler="true">\n          Seleziona\n      </button>\n      <% } else { %>\n      <form action="<%= service.endpoint %>" method="POST" name="updateshipping-form" data-component="updateShippingComponent" data-xhr="true" data-option-timeslot-enabled="false">\n\n          <% if (service.store.tobemapped) { %>\n            <input type="hidden" name="tobemapped" value="true" />\n          <% } %>\n          <input type="hidden" name="shippingMethodId" value="<%= service.shippingMethodId %>" />\n          <input type="hidden" name="storeId" value="<%= service.store.id %>" />\n          <input type="hidden" name="city" value="<%= service.city %>" />\n          <input type="hidden" name="cap" value="<%= service.cap %>" />\n          <input type="hidden" name="address" value="<%= service.address %>" />\n          <input type="hidden" name="state" value="<%= service.state %>" />\n          <input type="hidden" name="streetNumber" value="<%= service.streetNumber %>" />\n          <button type="submit" class="select-service">Seleziona</button>\n      </form>\n      <% } %>\n      <% if (service && service.store && service.store.iconNewServices && service.store.iconNewServices.length > 0 && service.store.iconNewServices.includes(service.shippingMethodId) && !service.hasExtraDeliveryServices) { %>\n        <span class="service-new-icon">novità</span>\n      <% } %>\n  </div>\n  <% if (service.hasExtraDeliveryServices && service.extraDeliveryLayer) { %>\n  <div class="extra-delivery-back-container">\n      <button\n          type="button"\n          data-component="togglerComponent"\n          data-option-name="openExtraLayer-<%= service.shippingMethodId %>"\n          data-option-handler="true"\n          class="back-to-services"\n      >\n          <i class="icon-arrow"></i>\n          <%= service.shippingMethodName.toUpperCase() %>\n      </button>\n  </div>\n  <div class="stores-list extra-delivery-list" data-component="togglerComponent" data-option-name="openExtraLayer-<%= service.shippingMethodId %>" data-option-target="true">\n      <%- service.extraDeliveryLayer -%>\n  </div>\n  <% } else if (service.stores && service.stores.length > 0) { %>\n  <div>\n      <button\n          type="button"\n          data-component="togglerComponent"\n          data-option-name="openStoresList-<%= service.shippingMethodId %>"\n          data-option-handler="true"\n          class="back-to-services"\n      >\n          Indietro\n      </button>\n  </div>\n  <ul class="stores-list" data-component="togglerComponent" data-option-name="openStoresList-<%= service.shippingMethodId %>" data-option-target="true">\n      <p class="section-title" tabindex="-1">Seleziona il punto di ritiro</p>\n  \x3c!--     <div class="banner-spalla-cap">\n        <img src="">\n        <div class="banner-spalla-text">\n        <h4>NOVITÀ STORE TERRE D\'ITALIA</h4>\n        <p>Da oggi puoi ritirare la tua spesa direttamente \n        in Piazza De Angeli 5</p>\n        </div>\n      </div> --\x3e\n      <% if(bannerOptions && bannerOptions.storesListBanner){ %>\n      <li>\n       <form action="<%= service.endpoint %>" method="POST" name="updateshipping-form" data-component="updateShippingComponent" data-xhr="true" data-option-timeslot-enabled="false">\n         \n           <%- bannerOptions.storesListBanner -%>\n\n       </form>\n      </li>\n      <% } %>\n      <% (service.stores).forEach(function(store){ %>\n        <% if(!bannerOptions || !bannerOptions.excludestore || bannerOptions.excludestore !== store.id){ %>\n      <li class="store-card <%= store.brand %> <%= store.iconNewServices && store.iconNewServices.length > 0 && store.iconNewServices.includes(service.shippingMethodId) ? \'store-service-new\' : \'\' %>">\n          <p class="store-details"><span><%= store.address1 %></span><%= store.postalCode %> - <%= store.city %> (<%= store.countryCode %>)</p>\n          <form action="<%= service.endpoint %>" method="POST" name="updateshipping-form" data-component="updateShippingComponent" data-xhr="true" data-option-timeslot-enabled="false">\n            <% if (store.tobemapped) { %>\n              <input type="hidden" name="tobemapped" value="true" />\n            <% } %>\n              <input type="hidden" name="shippingMethodId" value="<%= service.shippingMethodId %>" />\n              <input type="hidden" name="storeId" value="<%= store.id %>" />\n              <input type="hidden" name="city" value="<%= store.city %>" />\n              <input type="hidden" name="cap" value="<%= store.postalCode %>" />\n              <button type="submit" class="hidden-submit">Scegli</button>\n          </form>\n          <% if (store.iconNewServices && store.iconNewServices.length > 0 && store.iconNewServices.includes(service.shippingMethodId)) { %>\n            <span class="service-new-icon">novità</span>\n          <% } %>\n          </li>\n      <% } %>\n      <% }); %>\n    </ul>\n  <div class="message-box">\n      <h4>Come funziona?</h4>\n      <p><%- service.shippingMethodDescription %><%- service.extraDescription%></p>\n  </div>\n  <% } %> \n  <% if (service.storesFranchising && service.storesFranchising.length > 0) { %>\n    <div>\n        <button\n            type="button"\n            data-component="togglerComponent"\n            data-option-name="openStoresListFranchising"\n            data-option-handler="true"\n            class="back-to-services franchise"\n        >\n            Indietro\n        </button>\n    </div>\n    <ul class="stores-list franchise-list" data-component="togglerComponent" data-option-name="openStoresListFranchising" data-option-target="true">\n        <p class="section-title">Seleziona il punto vendita</p>\n        <% (service.storesFranchising).forEach(function(store){ %>\n        <li class="store-card <%= store.brand %> <%= store.iconNewServices && store.iconNewServices.length > 0 && store.iconNewServices.includes(service.shippingMethodId) ? \'store-service-new\' : \'\' %>">\n            <p class="store-details"><span><%= store.address1 %></span><%= store.postalCode %> - <%= store.city %> (<%= store.countryCode %>)</p>\n            <form action="<%= service.endpoint %>" method="POST" name="updateshipping-form" data-component="updateShippingComponent" data-xhr="true" data-option-timeslot-enabled="false">\n              <% if (store.tobemapped) { %>\n                <input type="hidden" name="tobemapped" value="true" />\n              <% } %>\n                <input type="hidden" name="shippingMethodId" value="deliveryExpress" />\n                <input type="hidden" name="storeId" value="<%= store.id %>" />\n                <input type="hidden" name="city" value="<%= service.city %>" />\n                <input type="hidden" name="cap" value="<%= service.cap %>" />\n                <button type="submit" class="hidden-submit">Scegli</button>\n            </form>\n            <% if (store.iconNewServices && store.iconNewServices.length > 0 && store.iconNewServices.includes(service.shippingMethodId)) { %>\n              <span class="service-new-icon">novità</span>\n            <% } %>\n            </li>\n        <% }); %>\n      </ul>\n    <% if (service.franchiseListContent) { %>\n    <div class="message-box">\n        <h4>Come funziona?</h4>\n        <p><%- service.franchiseListContent %></p>\n    </div>\n    <% } %>\n    <% } %> <% }); %> <% } else if (typeof capList!=\'undefined\' && capList.length > 0) { %>\n  <div class="store-service-card with-bg">\n      <p class="warning-msg"><%- selectLabel %></p>\n      <div class="select">\n          <select id="storelist" data-component="storeListComponent" data-option-el="cap">\n              <option value="-"><%= selectPlaceholder %></option>\n              <% capList.forEach(function(cap){ %>\n              <option value="<%= cap.cap %>"><%= cap.cap %> - <%= cap.city %></option>\n              <% }); %>\n          </select>\n      </div>\n  </div>\n  <%} else if (typeof cityList !=\'undefined\' && cityList.length > 0) { %>\n  <div class="store-service-card with-bg">\n      <p class="warning-msg"><%- selectLabel %></p>\n      <div class="select">\n          <select id="storelist" data-component="storeListComponent" data-option-el="city">\n              <option value="-"><%= selectPlaceholder %></option>\n              <% cityList.forEach(function(city){ %>\n              <option value="<%= city.city %>"><%= city.cap %> - <%= city.city %></option>\n              <% }); %>\n          </select>\n      </div>\n  </div>\n  <%} else { %>\n  <div class="store-service-card with-bg">\n      <p class="warning-msg"><%= msg %></p>\n  </div>\n  <%}%>\n</div>\n',
                    __filename = "src/microtemplates/stores/storeServicesNoTimeslot.ejs";
                try {
                    var __output = "";

                    function __append(e) {
                        null != e && (__output += e)
                    }
                    with(locals || {}) __append('<div class="scrollable-list">\n  '), __line = 2, "undefined" != typeof services && services.length > 0 ? (__append('\n  <p class="section-title method-label" tabindex="-1">Quale metodo preferisci?</p>\n  '), __line = 4, services.forEach(function(e, n) {
                        __append('\n  <div class="store-service-card '), __line = 5, __append(escapeFn(e.shippingMethodId)), __append(" "), __append(escapeFn(isTherePickupInStore && "pickup_in_store" == e.shippingMethodId ? "last-service" : isTherePickupInStore || n + 1 !== services.length ? "" : "last-service")), __append('">\n      <p class="service-title">'), __line = 6, __append(escapeFn(e.shippingMethodName)), __append('</p>\n      <p class="service-shordescription">'), __line = 7, __append(e.shippingMethodDescription), __append('</p>\n      <img src="'), __line = 8, __append(escapeFn(e.icon)), __append('" alt="" />\n      '), __line = 9, e.extraDescription && (__append('\n      <div class="extra-description">\n          <input id="'), __line = 11, __append(escapeFn(e.shippingMethodId)), __append('" class="checkbox" type="checkbox" />\n          <label for="'), __line = 12, __append(escapeFn(e.shippingMethodId)), __append('" class="icon icon-info trigger-extradescription"></label>\n          <p class="extradescription">'), __line = 13, __append(escapeFn(e.extraDescription)), __append("</p>\n      </div>\n      "), __line = 15), __append(" "), e.hasExtraDeliveryServices ? (__append('\n      <button type="button" class="select-service" data-component="togglerComponent" data-option-name="openExtraLayer-'), __line = 16, __append(escapeFn(e.shippingMethodId)), __append('" data-option-service="'), __append(escapeFn(e.shippingMethodId)), __append('" data-option-shipping-selected-cap="'), __append(escapeFn(e.cap)), __append('" data-option-selected-store-id="'), __append(escapeFn(storeIdSelected)), __append('" data-option-handler="true">\n          Seleziona\n      </button>\n      '), __line = 19) : e.storesFranchising && e.storesFranchising.length > 0 ? (__append('\n        <button type="button" class="select-service" data-component="togglerComponent" data-option-name="openStoresListFranchising" data-option-service="'), __line = 20, __append(escapeFn(e.shippingMethodId)), __append('" data-option-shipping-selected-cap="'), __append(escapeFn(e.cap)), __append('" data-option-selected-store-id="'), __append(escapeFn(storeIdSelected)), __append('" data-option-handler="true">\n            Seleziona\n        </button>\n      '), __line = 23) : e.stores && e.stores.length > 0 ? (__append('\n      <button type="button" class="select-service" data-component="togglerComponent" data-option-name="openStoresList-'), __line = 24, __append(escapeFn(e.shippingMethodId)), __append('" data-option-service="'), __append(escapeFn(e.shippingMethodId)), __append('" data-option-shipping-selected-cap="'), __append(escapeFn(e.cap)), __append('" data-option-selected-store-id="'), __append(escapeFn(storeIdSelected)), __append('" data-option-handler="true">\n          Seleziona\n      </button>\n      '), __line = 27) : (__append('\n      <form action="'), __line = 28, __append(escapeFn(e.endpoint)), __append('" method="POST" name="updateshipping-form" data-component="updateShippingComponent" data-xhr="true" data-option-timeslot-enabled="false">\n\n          '), __line = 30, e.store.tobemapped && (__append('\n            <input type="hidden" name="tobemapped" value="true" />\n          '), __line = 32), __append('\n          <input type="hidden" name="shippingMethodId" value="'), __line = 33, __append(escapeFn(e.shippingMethodId)), __append('" />\n          <input type="hidden" name="storeId" value="'), __line = 34, __append(escapeFn(e.store.id)), __append('" />\n          <input type="hidden" name="city" value="'), __line = 35, __append(escapeFn(e.city)), __append('" />\n          <input type="hidden" name="cap" value="'), __line = 36, __append(escapeFn(e.cap)), __append('" />\n          <input type="hidden" name="address" value="'), __line = 37, __append(escapeFn(e.address)), __append('" />\n          <input type="hidden" name="state" value="'), __line = 38, __append(escapeFn(e.state)), __append('" />\n          <input type="hidden" name="streetNumber" value="'), __line = 39, __append(escapeFn(e.streetNumber)), __append('" />\n          <button type="submit" class="select-service">Seleziona</button>\n      </form>\n      '), __line = 42), __append("\n      "), __line = 43, e && e.store && e.store.iconNewServices && e.store.iconNewServices.length > 0 && e.store.iconNewServices.includes(e.shippingMethodId) && !e.hasExtraDeliveryServices && (__append('\n        <span class="service-new-icon">novità</span>\n      '), __line = 45), __append("\n  </div>\n  "), __line = 47, e.hasExtraDeliveryServices && e.extraDeliveryLayer ? (__append('\n  <div class="extra-delivery-back-container">\n      <button\n          type="button"\n          data-component="togglerComponent"\n          data-option-name="openExtraLayer-'), __line = 52, __append(escapeFn(e.shippingMethodId)), __append('"\n          data-option-handler="true"\n          class="back-to-services"\n      >\n          <i class="icon-arrow"></i>\n          '), __line = 57, __append(escapeFn(e.shippingMethodName.toUpperCase())), __append('\n      </button>\n  </div>\n  <div class="stores-list extra-delivery-list" data-component="togglerComponent" data-option-name="openExtraLayer-'), __line = 60, __append(escapeFn(e.shippingMethodId)), __append('" data-option-target="true">\n      '), __line = 61, __append(e.extraDeliveryLayer), __append("  </div>\n  "), __line = 63) : e.stores && e.stores.length > 0 && (__append('\n  <div>\n      <button\n          type="button"\n          data-component="togglerComponent"\n          data-option-name="openStoresList-'), __line = 68, __append(escapeFn(e.shippingMethodId)), __append('"\n          data-option-handler="true"\n          class="back-to-services"\n      >\n          Indietro\n      </button>\n  </div>\n  <ul class="stores-list" data-component="togglerComponent" data-option-name="openStoresList-'), __line = 75, __append(escapeFn(e.shippingMethodId)), __append('" data-option-target="true">\n      <p class="section-title" tabindex="-1">Seleziona il punto di ritiro</p>\n  \x3c!--     <div class="banner-spalla-cap">\n        <img src="">\n        <div class="banner-spalla-text">\n        <h4>NOVITÀ STORE TERRE D\'ITALIA</h4>\n        <p>Da oggi puoi ritirare la tua spesa direttamente \n        in Piazza De Angeli 5</p>\n        </div>\n      </div> --\x3e\n      '), __line = 85, bannerOptions && bannerOptions.storesListBanner && (__append('\n      <li>\n       <form action="'), __line = 87, __append(escapeFn(e.endpoint)), __append('" method="POST" name="updateshipping-form" data-component="updateShippingComponent" data-xhr="true" data-option-timeslot-enabled="false">\n         \n           '), __line = 89, __append(bannerOptions.storesListBanner), __append("\n       </form>\n      </li>\n      "), __line = 93), __append("\n      "), __line = 94, e.stores.forEach(function(n) {
                            __append("\n        "), __line = 95, bannerOptions && bannerOptions.excludestore && bannerOptions.excludestore === n.id || (__append('\n      <li class="store-card '), __line = 96, __append(escapeFn(n.brand)), __append(" "), __append(escapeFn(n.iconNewServices && n.iconNewServices.length > 0 && n.iconNewServices.includes(e.shippingMethodId) ? "store-service-new" : "")), __append('">\n          <p class="store-details"><span>'), __line = 97, __append(escapeFn(n.address1)), __append("</span>"), __append(escapeFn(n.postalCode)), __append(" - "), __append(escapeFn(n.city)), __append(" ("), __append(escapeFn(n.countryCode)), __append(')</p>\n          <form action="'), __line = 98, __append(escapeFn(e.endpoint)), __append('" method="POST" name="updateshipping-form" data-component="updateShippingComponent" data-xhr="true" data-option-timeslot-enabled="false">\n            '), __line = 99, n.tobemapped && (__append('\n              <input type="hidden" name="tobemapped" value="true" />\n            '), __line = 101), __append('\n              <input type="hidden" name="shippingMethodId" value="'), __line = 102, __append(escapeFn(e.shippingMethodId)), __append('" />\n              <input type="hidden" name="storeId" value="'), __line = 103, __append(escapeFn(n.id)), __append('" />\n              <input type="hidden" name="city" value="'), __line = 104, __append(escapeFn(n.city)), __append('" />\n              <input type="hidden" name="cap" value="'), __line = 105, __append(escapeFn(n.postalCode)), __append('" />\n              <button type="submit" class="hidden-submit">Scegli</button>\n          </form>\n          '), __line = 108, n.iconNewServices && n.iconNewServices.length > 0 && n.iconNewServices.includes(e.shippingMethodId) && (__append('\n            <span class="service-new-icon">novità</span>\n          '), __line = 110), __append("\n          </li>\n      "), __line = 112), __append("\n      "), __line = 113
                        }), __append('\n    </ul>\n  <div class="message-box">\n      <h4>Come funziona?</h4>\n      <p>'), __line = 117, __append(e.shippingMethodDescription), __append(e.extraDescription), __append("</p>\n  </div>\n  "), __line = 119), __append(" \n  "), __line = 120, e.storesFranchising && e.storesFranchising.length > 0 && (__append('\n    <div>\n        <button\n            type="button"\n            data-component="togglerComponent"\n            data-option-name="openStoresListFranchising"\n            data-option-handler="true"\n            class="back-to-services franchise"\n        >\n            Indietro\n        </button>\n    </div>\n    <ul class="stores-list franchise-list" data-component="togglerComponent" data-option-name="openStoresListFranchising" data-option-target="true">\n        <p class="section-title">Seleziona il punto vendita</p>\n        '), __line = 134, e.storesFranchising.forEach(function(n) {
                            __append('\n        <li class="store-card '), __line = 135, __append(escapeFn(n.brand)), __append(" "), __append(escapeFn(n.iconNewServices && n.iconNewServices.length > 0 && n.iconNewServices.includes(e.shippingMethodId) ? "store-service-new" : "")), __append('">\n            <p class="store-details"><span>'), __line = 136, __append(escapeFn(n.address1)), __append("</span>"), __append(escapeFn(n.postalCode)), __append(" - "), __append(escapeFn(n.city)), __append(" ("), __append(escapeFn(n.countryCode)), __append(')</p>\n            <form action="'), __line = 137, __append(escapeFn(e.endpoint)), __append('" method="POST" name="updateshipping-form" data-component="updateShippingComponent" data-xhr="true" data-option-timeslot-enabled="false">\n              '), __line = 138, n.tobemapped && (__append('\n                <input type="hidden" name="tobemapped" value="true" />\n              '), __line = 140), __append('\n                <input type="hidden" name="shippingMethodId" value="deliveryExpress" />\n                <input type="hidden" name="storeId" value="'), __line = 142, __append(escapeFn(n.id)), __append('" />\n                <input type="hidden" name="city" value="'), __line = 143, __append(escapeFn(e.city)), __append('" />\n                <input type="hidden" name="cap" value="'), __line = 144, __append(escapeFn(e.cap)), __append('" />\n                <button type="submit" class="hidden-submit">Scegli</button>\n            </form>\n            '), __line = 147, n.iconNewServices && n.iconNewServices.length > 0 && n.iconNewServices.includes(e.shippingMethodId) && (__append('\n              <span class="service-new-icon">novità</span>\n            '), __line = 149), __append("\n            </li>\n        "), __line = 151
                        }), __append("\n      </ul>\n    "), __line = 153, e.franchiseListContent && (__append('\n    <div class="message-box">\n        <h4>Come funziona?</h4>\n        <p>'), __line = 156, __append(e.franchiseListContent), __append("</p>\n    </div>\n    "), __line = 158), __append("\n    "), __line = 159), __append(" ")
                    }), __append(" ")) : "undefined" != typeof capList && capList.length > 0 ? (__append('\n  <div class="store-service-card with-bg">\n      <p class="warning-msg">'), __line = 161, __append(selectLabel), __append('</p>\n      <div class="select">\n          <select id="storelist" data-component="storeListComponent" data-option-el="cap">\n              <option value="-">'), __line = 164, __append(escapeFn(selectPlaceholder)), __append("</option>\n              "), __line = 165, capList.forEach(function(e) {
                        __append('\n              <option value="'), __line = 166, __append(escapeFn(e.cap)), __append('">'), __append(escapeFn(e.cap)), __append(" - "), __append(escapeFn(e.city)), __append("</option>\n              "), __line = 167
                    }), __append("\n          </select>\n      </div>\n  </div>\n  "), __line = 171) : "undefined" != typeof cityList && cityList.length > 0 ? (__append('\n  <div class="store-service-card with-bg">\n      <p class="warning-msg">'), __line = 173, __append(selectLabel), __append('</p>\n      <div class="select">\n          <select id="storelist" data-component="storeListComponent" data-option-el="city">\n              <option value="-">'), __line = 176, __append(escapeFn(selectPlaceholder)), __append("</option>\n              "), __line = 177, cityList.forEach(function(e) {
                        __append('\n              <option value="'), __line = 178, __append(escapeFn(e.city)), __append('">'), __append(escapeFn(e.cap)), __append(" - "), __append(escapeFn(e.city)), __append("</option>\n              "), __line = 179
                    }), __append("\n          </select>\n      </div>\n  </div>\n  "), __line = 183) : (__append('\n  <div class="store-service-card with-bg">\n      <p class="warning-msg">'), __line = 185, __append(escapeFn(msg)), __append("</p>\n  </div>\n  "), __line = 187), __append("\n</div>\n"), __line = 189;
                    return __output
                } catch (e) {
                    rethrow(e, __lines, __filename, __line, escapeFn)
                }
            }
        },
        90991: function(e, n, t) {
            "use strict";
            t.d(n, {
                A: function() {
                    return a
                }
            });
            var i = t(53954);

            function a() {
                return a = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function(e, n, t) {
                    var a = function(e, n) {
                        for (; !{}.hasOwnProperty.call(e, n) && null !== (e = (0, i.A)(e)););
                        return e
                    }(e, n);
                    if (a) {
                        var s = Object.getOwnPropertyDescriptor(a, n);
                        return s.get ? s.get.call(arguments.length < 3 ? e : t) : s.value
                    }
                }, a.apply(null, arguments)
            }
        },
        95171: function(module) {
            module.exports = function anonymous(locals, escapeFn, include, rethrow) {
                rethrow = rethrow || function(e, n, t, i, a) {
                    var s = n.split("\n"),
                        o = Math.max(i - 3, 0),
                        p = Math.min(s.length, i + 3),
                        r = a(t),
                        d = s.slice(o, p).map(function(e, n) {
                            var t = n + o + 1;
                            return (t == i ? " >> " : "    ") + t + "| " + e
                        }).join("\n");
                    throw e.path = r, e.message = (r || "ejs") + ":" + i + "\n" + d + "\n\n" + e.message, e
                }, escapeFn = escapeFn || function(e) {
                    return null == e ? "" : String(e).replace(_MATCH_HTML, encode_char)
                };
                var _ENCODE_HTML_RULES = {
                        "&": "&amp;",
                        "<": "&lt;",
                        ">": "&gt;",
                        '"': "&#34;",
                        "'": "&#39;"
                    },
                    _MATCH_HTML = /[&<>'"]/g;

                function encode_char(e) {
                    return _ENCODE_HTML_RULES[e] || e
                }
                var __line = 1,
                    __lines = '<div class="scrollable-list">\n    <% if (typeof services!=\'undefined\' && services.length > 0) { %>\n    <p class="section-title method-label" tabindex="-1">Quale metodo preferisci?</p>\n    <% services.forEach(function(service, index){ %>\n    <div class="store-service-card <%= service.shippingMethodId %> <%= isTherePickupInStore && service.shippingMethodId == \'pickup_in_store\' ?  \'last-service\' : !isTherePickupInStore && index + 1 === services.length ? \'last-service\' : \'\' %>">\n        <p class="service-title"><%= service.shippingMethodName %></p>\n        <p class="service-shordescription"><%- service.shippingMethodDescription %></p>\n        <img src="<%= service.icon %>" alt="" />\n        <% if(service.extraDescription) { %>\n        <div class="extra-description">\n            <input id="<%=service.shippingMethodId %>" class="checkbox" type="checkbox" />\n            <label for="<%=service.shippingMethodId %>" class="icon icon-info trigger-extradescription"></label>\n            <p class="extradescription"><%= service.extraDescription%></p>\n        </div>\n        <% } %> <% if (service.hasExtraDeliveryServices) { %>\n        <button type="button" class="select-service" data-component="togglerComponent" data-option-name="openExtraLayer-<%= service.shippingMethodId %>" data-option-service="<%= service.shippingMethodId %>" data-option-shipping-selected-cap="<%= service.cap %>" data-option-handler="true">\n            Seleziona\n        </button>\n        <% } else if (service.storesFranchising && service.storesFranchising.length > 0) { %>\n          <button type="button" class="select-service" data-component="togglerComponent" data-option-name="openStoresListFranchising" data-option-service="<%= service.shippingMethodId %>" data-option-shipping-selected-cap="<%= service.cap %>" data-option-handler="true">\n              Seleziona\n          </button>\n        <% } else if (service.store && service.storesDelivery.length === 1) { %>\n          <button type="button" class="select-service" data-component="togglerComponent" data-option-name="openSingleStoreDeliveryList" data-option-service="<%= service.shippingMethodId %>" data-option-shipping-selected-cap="<%= service.cap %>" data-option-handler="true">\n              Seleziona\n          </button>\n        <% } else if (service.stores && service.stores.length > 0) { %>\n        <button type="button" class="select-service" data-component="togglerComponent" data-option-name="openStoresList-<%= service.shippingMethodId %>" data-option-service="<%= service.shippingMethodId %>" data-option-shipping-selected-cap="<%= service.cap %>" data-option-handler="true">\n            Seleziona\n        </button>\n        <% } else { %>\n        <form action="<%= service.endpoint %>" method="POST" name="updateshipping-form" data-component="updateShippingComponent" data-xhr="true" data-option-timeslot-enabled="true">\n\n            <% if (service.store.tobemapped) { %>\n              <input type="hidden" name="tobemapped" value="true" />\n            <% } %>\n            <input type="hidden" name="shippingMethodId" value="<%= service.shippingMethodId %>" />\n            <input type="hidden" name="storeId" value="<%= service.store.id %>" />\n            <input type="hidden" name="city" value="<%= service.city %>" />\n            <input type="hidden" name="cap" value="<%= service.cap %>" />\n            <input type="hidden" name="address" value="<%= service.address %>" />\n            <input type="hidden" name="state" value="<%= service.state %>" />\n            <input type="hidden" name="streetNumber" value="<%= service.streetNumber %>" />\n            <button type="submit" class="select-service">Seleziona</button>\n        </form>\n        <% } %>\n        <% if (service && service.store && service.store.iconNewServices && service.store.iconNewServices.length > 0 && service.store.iconNewServices.includes(service.shippingMethodId) && !service.hasExtraDeliveryServices) { %>\n          <span class="service-new-icon">novità</span>\n        <% } %>\n    </div>\n    <% if (service.hasExtraDeliveryServices && service.extraDeliveryLayer) { %>\n    <div class="extra-delivery-back-container">\n        <button\n            type="button"\n            data-component="togglerComponent"\n            data-option-name="openExtraLayer-<%= service.shippingMethodId %>"\n            data-option-handler="true"\n            class="back-to-services"\n        >\n            <i class="icon-arrow"></i>\n            <%= service.shippingMethodName.toUpperCase() %>\n        </button>\n        <p class="back-to-services description openExtraLayer-<%= service.shippingMethodId %> toggleActive extra" data-label-default="Scegli il servizio più adatto a te" data-label-toggle="Prenota giorno e orario di consegna">Scegli il servizio più adatto a te</p>\n    </div>\n    <ul class="stores-list extra-delivery-list" data-component="togglerComponent" data-option-name="openExtraLayer-<%= service.shippingMethodId %>" data-option-target="true">\n        <%- service.extraDeliveryLayer -%>\n    </ul>\n    <% } else if (service.stores && service.stores.length > 0) { %>\n    <div class="extra-delivery-back-container">\n        <button\n            type="button"\n            data-component="togglerComponent"\n            data-option-name="openStoresList-<%= service.shippingMethodId %>"\n            data-option-handler="true"\n            class="back-to-services"\n        >\n        <i class="icon-arrow"></i>\n        <%= service.shippingMethodName.toUpperCase() %>\n        </button>\n        <p class="back-to-services description openStoresList-<%= service.shippingMethodId %> toggleActive list" data-label-default="Seleziona il punto di ritiro" data-label-toggle="Prenota giorno e orario di ritiro" tabindex="-1">Seleziona il punto di ritiro</p>\n    </div>\n    <ul class="stores-list" data-component="togglerComponent" data-option-name="openStoresList-<%= service.shippingMethodId %>" data-option-target="true">\n      <li>\n        <button class="btn button-change-store js-change-store d-none"><img src="<%= service.storeIcon %>" alt=""></i>Cambia punto vendita</button>\n      </li>\n      \x3c!-- <p class="section-title">Seleziona il punto di ritiro</p> --\x3e\n    \x3c!--     <div class="banner-spalla-cap">\n          <img src="">\n          <div class="banner-spalla-text">\n          <h4>NOVITÀ STORE TERRE D\'ITALIA</h4>\n          <p>Da oggi puoi ritirare la tua spesa direttamente \n          in Piazza De Angeli 5</p>\n          </div>\n        </div> --\x3e\n        <% if(bannerOptions && bannerOptions.storesListBanner){ %>\n        <li>\n         <form action="<%= service.endpoint %>" method="POST" name="updateshipping-form" data-component="updateShippingComponent" data-xhr="true" data-option-timeslot-enabled="true">\n           \n             <%- bannerOptions.storesListBanner -%>\n\n         </form>\n        </li>\n        <% } %>\n        <% (service.stores).forEach(function(store){ %>\n          <% if(!bannerOptions || !bannerOptions.excludestore || bannerOptions.excludestore !== store.id){ %>\n        <li class="store-card js-store-card store-card-wrapper <%= store.brand %> <%= store.iconNewServices && store.iconNewServices.length > 0 && store.iconNewServices.includes(service.shippingMethodId) ? \'store-service-new\' : \'\' %>">\n            <p class="store-details store-card-toggle" data-component="timeslotsTogglerComponent" data-option-shipping-selected-cap="<%= store.postalCode %>" data-option-selected-store-id="<%= store.id %>" data-option-endpoint="<%= service.getTimeslotsEndpoint %>" data-option-error-icon-url="<%= service.errorIconUrl %>" data-option-store-id="<%= store.id %>" data-option-method-id="<%= service.shippingMethodId %>" data-option-name="deliveryToggle-<%= service.shippingMethodId %>-<%= store.id %>" data-option-handler="true" tabindex="0" role="button" aria-pressed="false" data-option-service-type="list" data-option-cap="<%= store.postalCode %>" data-option-city="<%= store.city %>"><span><%= store.address1 %></span><%= store.postalCode %> - <%= store.city %> (<%= store.countryCode %>)</p>\n            \n            <div class="store-card-wrapper--content" data-option-name="deliveryToggle-<%= service.shippingMethodId %>-<%= store.id %>">\n              <div class="js-store-card-timeslot"></div>\n              <div class="inline-tooltip">\n                <i class="inline-tooltip--icon icon-fl-info"></i>\n                <p class="inline-tooltip--text">\n                  <% if (!store.isFranchising) { %>\n                    Pagamento con buoni pasto o giftcard <b>disponibile</b>\n                  <% } else { %>\n                    Pagamento con buoni pasto o giftcard <b>non disponibile</b>\n                  <% } %>\n                </p>\n              </div>\n              <% if (!service.userLogged) { %>\n                <div class="inline-tooltip bg-functional-warning js-hide-if-service-unavailable">\n                  <i class="inline-tooltip--icon icon-user-check"></i>\n                  <p class="inline-tooltip--text">\n                    Per confermare la prenotazione della fascia oraria è necessario <b>effettuare il login</b>\n                  </p>\n                </div>\n              <% } %>\n              <div class="store-card-button-wrapper js-next-step">\n                <form action="<%= service.endpoint %>" method="POST" name="updateshipping-form" data-component="updateShippingComponent" data-xhr="true" data-option-timeslot-enabled="true">\n                  <% if (store.tobemapped) { %>\n                    <input type="hidden" name="tobemapped" value="true" />\n                  <% } %>\n                    <input type="hidden" name="shippingMethodId" value="<%= service.shippingMethodId %>" />\n                    <input type="hidden" name="storeId" value="<%= store.id %>" />\n                    <input type="hidden" name="city" value="<%= store.city %>" />\n                    <input type="hidden" name="cap" value="<%= store.postalCode %>" />\n                    <button type="submit" class="btn btn-secondary small" data-option-service-available="true">Scegli più tardi</button>\n                  </form>\n                <div class="tooltipArea js-hide-if-service-unavailable">\n                  <button class="btn btn-primary small js-next js-timeslot-submit" data-option-endpoint="<%= service.reserveTimeslotsEndpoint %>" aria-disabled="true"><%= service.userLogged ? \'Conferma\' : \'Accedi\' %></button>\n                  <div role="tooltip" class="tooltipBox">\n                    <span class="tooltipInnerText">Seleziona una fascia oraria per poter prenotare la consegna.</span>\n                  </div>\n                </div>\n              </div>\n\n            </div>\n            <% if (store.iconNewServices && store.iconNewServices.length > 0 && store.iconNewServices.includes(service.shippingMethodId)) { %>\n              <span class="service-new-icon">novità</span>\n            <% } %>\n            </li>\n        <% } %>\n        <% }); %>\n      </ul>\n    <div class="message-box">\n        <h4>Come funziona?</h4>\n        <p><%- service.shippingMethodDescription %><%- service.extraDescription%></p>\n    </div>\n    <% } %> \n\n    <% if (service.store && service.storesDelivery && service.storesDelivery.length === 1) { %>\n        <div class="extra-delivery-back-container">\n          <button\n              type="button"\n              data-component="togglerComponent"\n              data-option-name="openSingleStoreDeliveryList"\n              data-option-handler="true"\n              class="back-to-services franchise"\n          >\n          <i class="icon-arrow"></i>\n          <%= service.shippingMethodName.toUpperCase() %>\n          </button>\n          <p class="back-to-services franchise description openSingleStoreDeliveryList toggleActive single" data-label-default="Prenota giorno e orario di consegna" data-label-toggle="Prenota giorno e orario di consegna">Prenota giorno e orario di consegna</p>\n        </div>\n      <ul class="stores-list franchise-list single-store-list" data-component="togglerComponent" data-option-name="openSingleStoreDeliveryList" data-option-target="true">\n        <div class="store-card js-store-card store-card-wrapper <%= service.store.brand %> <%= service.store.iconNewServices && service.store.iconNewServices.length > 0 && service.store.iconNewServices.includes(service.shippingMethodId) ? \'store-service-new\' : \'\' %>"\n          >\n          <p class="store-details store-card-toggle" data-component="timeslotsTogglerComponent" data-option-shipping-selected-cap="<%= service.store.postalCode %>" data-option-selected-store-id="<%= service.store.id %>" data-option-endpoint="<%= service.getTimeslotsEndpoint %>" data-option-error-icon-url="<%= service.errorIconUrl %>" data-option-store-id="<%= service.store.id %>" data-option-method-id="<%= service.shippingMethodId %>" data-option-name="deliveryToggle-<%= service.store.id %>" data-option-handler="true" tabindex="0" role="button" aria-pressed="false" data-option-service-type="single" data-option-cap="<%= service.cap %>" data-option-city="<%= service.city %>"><span><%= service.store.address1 %></span><%= service.store.postalCode %> - <%= service.store.city %> (<%= service.store.countryCode %>)</p>\n          <% if (service.store.iconNewServices && service.store.iconNewServices.length > 0 && service.store.iconNewServices.includes(service.shippingMethodId)) { %>\n            <span class="service-new-icon">novità</span>\n          <% } %>\n            <div class="store-card-wrapper--content" data-option-name="deliveryToggle-<%= service.store.id %>">\n\n              <div class="js-store-card-timeslot"></div>\n\n              <div class="inline-tooltip">\n                <i class="inline-tooltip--icon icon-fl-info"></i>\n                <p class="inline-tooltip--text">\n                  <% if (service.shippingMethodId === \'delivery\') { %>\n                    Pagamento con buoni pasto o giftcard <b>disponibile</b>\n                  <% } else if (service.shippingMethodId === \'deliveryExpress\') { %>\n                    Pagamento con buoni pasto o giftcard <b>non disponibile</b>\n                  <% } %>\n                </p>\n              </div>\n              <% if (!service.userLogged) { %>\n                <div class="inline-tooltip bg-functional-warning js-hide-if-service-unavailable">\n                  <i class="inline-tooltip--icon icon-user-check"></i>\n                  <p class="inline-tooltip--text">\n                    Per confermare la prenotazione della fascia oraria è necessario <b>effettuare il login</b>\n                  </p>\n                </div>\n              <% } %>\n\n\n              <div class="store-card-button-wrapper js-next-step">\n                <form action="<%= service.endpoint %>" method="POST" name="updateshipping-form" data-component="updateShippingComponent" data-xhr="true" data-option-timeslot-enabled="true">\n                  <% if (service.store.tobemapped) { %>\n                    <input type="hidden" name="tobemapped" value="true" />\n                  <% } %>\n                    <input type="hidden" name="shippingMethodId" value="<%= service.shippingMethodId %>" />\n                    <input type="hidden" name="storeId" value="<%= service.store.id %>" />\n                    <input type="hidden" name="city" value="<%= service.city %>" />\n                    <input type="hidden" name="cap" value="<%= service.cap %>" />\n                    <input type="hidden" name="address" value="<%= service.address %>" />\n                    <input type="hidden" name="state" value="<%= service.state %>" />\n                    <input type="hidden" name="streetNumber" value="<%= service.streetNumber %>" />\n                    <button type="submit" class="btn btn-secondary small" data-option-service-available="true">Scegli più tardi</button>\n                </form>\n                <div class="tooltipArea js-hide-if-service-unavailable">\n                  <button class="btn btn-primary small js-next js-timeslot-submit" data-option-endpoint="<%= service.reserveTimeslotsEndpoint %>" aria-disabled="true"><%= service.userLogged ? \'Conferma\' : \'Accedi\' %></button>\n                  <div role="tooltip" class="tooltipBox">\n                    <span class="tooltipInnerText">Seleziona una fascia oraria per poter prenotare la consegna.</span>\n                  </div>\n                </div>\n              </div>\n\n\n            </div>\n        </div>\n        <% if(service.deliveryCostContentAsset){ %>\n          <div class="external-delivery-card">\n            <%- service.deliveryCostContentAsset -%>\n          </div>\n        <% } %>\n        </ul>\n      <% } %> \n\n    <% if (service.storesFranchising && service.storesFranchising.length > 0) { %>\n      <div class="extra-delivery-back-container">\n          <button\n              type="button"\n              data-component="togglerComponent"\n              data-option-name="openStoresListFranchising"\n              data-option-handler="true"\n              class="back-to-services franchise"\n          >\n          <i class="icon-arrow"></i>\n          <%= service.shippingMethodName.toUpperCase() %>\n          </button>\n          <p class="back-to-services franchise description openStoresListFranchising toggleActive" data-label-default="Seleziona il punto vendita" data-label-toggle="Prenota giorno e orario di consegna">Seleziona il punto vendita</p>\n        </div>\n      <ul class="stores-list franchise-list" data-component="togglerComponent" data-option-name="openStoresListFranchising" data-option-target="true">\n          \x3c!-- <p class="section-title">Seleziona il punto vendita</p> --\x3e\n          <% (service.storesFranchising).forEach(function(store){ %>\n            \x3c!--WIP--\x3e\n              <li class="store-card js-store-card store-card-wrapper <%= store.brand %> <%= store.iconNewServices && store.iconNewServices.length > 0 && store.iconNewServices.includes(service.shippingMethodId) ? \'store-service-new\' : \'\' %>"\n                >\n                <p class="store-details store-card-toggle" data-component="timeslotsTogglerComponent" data-option-shipping-selected-cap="<%= service.cap %>" data-option-selected-store-id="<%= store.id %>" data-option-endpoint="<%= service.getTimeslotsEndpoint %>" data-option-error-icon-url="<%= service.errorIconUrl %>" data-option-store-id="<%= store.id %>" data-option-method-id="<%= service.shippingMethodId %>" data-option-name="deliveryToggle-<%= store.id %>" data-option-handler="true" tabindex="0" role="button" aria-pressed="false" data-option-service-type="franchise" data-option-cap="<%= service.cap %>" data-option-city="<%= service.city %>"><span><%= store.address1 %></span><%= store.postalCode %> - <%= store.city %> (<%= store.countryCode %>)</p>\n                <% if (store.iconNewServices && store.iconNewServices.length > 0 && store.iconNewServices.includes(service.shippingMethodId)) { %>\n                  <span class="service-new-icon">novità</span>\n                <% } %>\n                  <div class="store-card-wrapper--content" data-option-name="deliveryToggle-<%= store.id %>">\n\n                    <div class="js-store-card-timeslot"></div>\n\n                    <div class="inline-tooltip">\n                      <i class="inline-tooltip--icon icon-fl-info"></i>\n                      <p class="inline-tooltip--text">\n                        <% if (service.shippingMethodId === \'delivery\') { %>\n                          Pagamento con buoni pasto o giftcard <b>disponibile</b>\n                        <% } else if (service.shippingMethodId === \'deliveryExpress\') { %>\n                          Pagamento con buoni pasto o giftcard <b>non disponibile</b>\n                        <% } %>                      </p>\n                    </div>\n                    <% if (!service.userLogged) { %>\n                      <div class="inline-tooltip bg-functional-warning js-hide-if-service-unavailable">\n                        <i class="inline-tooltip--icon icon-user-check"></i>\n                        <p class="inline-tooltip--text">\n                          Per confermare la prenotazione della fascia<br> oraria è necessario <b>effettuare il login</b>\n                        </p>\n                      </div>\n                    <% } %>\n\n\n                    <div class="store-card-button-wrapper js-next-step">\n                      <form action="<%= service.endpoint %>" method="POST" name="updateshipping-form" data-component="updateShippingComponent" data-xhr="true" data-option-timeslot-enabled="true">\n                        <% if (store.tobemapped) { %>\n                          <input type="hidden" name="tobemapped" value="true" />\n                        <% } %>\n                          <input type="hidden" name="shippingMethodId" value="deliveryExpress" />\n                          <input type="hidden" name="storeId" value="<%= store.id %>" />\n                          <input type="hidden" name="city" value="<%= service.city %>" />\n                          <input type="hidden" name="cap" value="<%= service.cap %>" />\n                          <input type="hidden" name="address" value="<%= service.address %>" />\n                          <input type="hidden" name="state" value="<%= service.state %>" />\n                          <input type="hidden" name="streetNumber" value="<%= service.streetNumber %>" />\n                          <button type="submit" class="btn btn-secondary small" data-option-service-available="true">Scegli più tardi</button>\n                      </form>\n                      <div class="tooltipArea js-hide-if-service-unavailable">\n                        <button class="btn btn-primary small js-next js-timeslot-submit" data-option-endpoint="<%= service.reserveTimeslotsEndpoint %>" aria-disabled="true"><%= service.userLogged ? \'Conferma\' : \'Accedi\' %></button>\n                        <div role="tooltip" class="tooltipBox">\n                          <span class="tooltipInnerText">Seleziona una fascia oraria per poter prenotare la consegna.</span>\n                        </div>\n                      </div>\n\n                    </div>\n    \n\n                  </div>\n                </li>\n\n\n          <% }); %>\n          <% if(service.deliveryCostContentAsset){ %>\n            <div class="external-delivery-card">\n              <%- service.deliveryCostContentAsset -%>\n            </div>\n          <% } %>\n          </ul>\n      <% if (service.franchiseListContent) { %>\n      <div class="message-box">\n          <h4>Come funziona?</h4>\n          <p><%- service.franchiseListContent %></p>\n      </div>\n      <% } %>\n      <% } %> <% }); %> <% } else if (typeof capList!=\'undefined\' && capList.length > 0) { %>\n    <div class="store-service-card with-bg">\n        <p class="warning-msg"><%- selectLabel %></p>\n        <div class="select">\n            <select id="storelist" data-component="storeListComponent" data-option-el="cap">\n                <option value="-"><%= selectPlaceholder %></option>\n                <% capList.forEach(function(cap){ %>\n                <option value="<%= cap.cap %>"><%= cap.cap %> - <%= cap.city %></option>\n                <% }); %>\n            </select>\n        </div>\n    </div>\n    <% if (warningCityCap) { %>\n    <div class="store-service-card city-cap-warning with-bg with-border fixed-bottom">\n      <p class="information-msg"><%= warningCityCap %></p>\n    </div>\n    <% } %>\n    <%} else if (typeof cityList !=\'undefined\' && cityList.length > 0) { %>\n    <div class="store-service-card with-bg">\n        <p class="warning-msg"><%- selectLabel %></p>\n        <div class="select">\n            <select id="storelist" data-component="storeListComponent" data-option-el="city">\n                <option value="-"><%= selectPlaceholder %></option>\n                <% cityList.forEach(function(city){ %>\n                <option value="<%= city.city %>"><%= city.cap %> - <%= city.city %></option>\n                <% }); %>\n            </select>\n        </div>\n    </div>\n    <% if (warningCityCap) { %>\n      <div class="store-service-card city-cap-warning with-bg with-border fixed-bottom">\n        <p class="information-msg"><%= warningCityCap %></p>\n      </div>\n    <% } %>\n    <%} else { %>\n    <div class="store-service-card with-bg">\n        <p class="warning-msg"><%= msg %></p>\n    </div>\n    <%}%>\n</div>\n',
                    __filename = "src/microtemplates/stores/storeServices.ejs";
                try {
                    var __output = "";

                    function __append(e) {
                        null != e && (__output += e)
                    }
                    with(locals || {}) __append('<div class="scrollable-list">\n    '), __line = 2, "undefined" != typeof services && services.length > 0 ? (__append('\n    <p class="section-title method-label" tabindex="-1">Quale metodo preferisci?</p>\n    '), __line = 4, services.forEach(function(e, n) {
                        __append('\n    <div class="store-service-card '), __line = 5, __append(escapeFn(e.shippingMethodId)), __append(" "), __append(escapeFn(isTherePickupInStore && "pickup_in_store" == e.shippingMethodId ? "last-service" : isTherePickupInStore || n + 1 !== services.length ? "" : "last-service")), __append('">\n        <p class="service-title">'), __line = 6, __append(escapeFn(e.shippingMethodName)), __append('</p>\n        <p class="service-shordescription">'), __line = 7, __append(e.shippingMethodDescription), __append('</p>\n        <img src="'), __line = 8, __append(escapeFn(e.icon)), __append('" alt="" />\n        '), __line = 9, e.extraDescription && (__append('\n        <div class="extra-description">\n            <input id="'), __line = 11, __append(escapeFn(e.shippingMethodId)), __append('" class="checkbox" type="checkbox" />\n            <label for="'), __line = 12, __append(escapeFn(e.shippingMethodId)), __append('" class="icon icon-info trigger-extradescription"></label>\n            <p class="extradescription">'), __line = 13, __append(escapeFn(e.extraDescription)), __append("</p>\n        </div>\n        "), __line = 15), __append(" "), e.hasExtraDeliveryServices ? (__append('\n        <button type="button" class="select-service" data-component="togglerComponent" data-option-name="openExtraLayer-'), __line = 16, __append(escapeFn(e.shippingMethodId)), __append('" data-option-service="'), __append(escapeFn(e.shippingMethodId)), __append('" data-option-shipping-selected-cap="'), __append(escapeFn(e.cap)), __append('" data-option-handler="true">\n            Seleziona\n        </button>\n        '), __line = 19) : e.storesFranchising && e.storesFranchising.length > 0 ? (__append('\n          <button type="button" class="select-service" data-component="togglerComponent" data-option-name="openStoresListFranchising" data-option-service="'), __line = 20, __append(escapeFn(e.shippingMethodId)), __append('" data-option-shipping-selected-cap="'), __append(escapeFn(e.cap)), __append('" data-option-handler="true">\n              Seleziona\n          </button>\n        '), __line = 23) : e.store && 1 === e.storesDelivery.length ? (__append('\n          <button type="button" class="select-service" data-component="togglerComponent" data-option-name="openSingleStoreDeliveryList" data-option-service="'), __line = 24, __append(escapeFn(e.shippingMethodId)), __append('" data-option-shipping-selected-cap="'), __append(escapeFn(e.cap)), __append('" data-option-handler="true">\n              Seleziona\n          </button>\n        '), __line = 27) : e.stores && e.stores.length > 0 ? (__append('\n        <button type="button" class="select-service" data-component="togglerComponent" data-option-name="openStoresList-'), __line = 28, __append(escapeFn(e.shippingMethodId)), __append('" data-option-service="'), __append(escapeFn(e.shippingMethodId)), __append('" data-option-shipping-selected-cap="'), __append(escapeFn(e.cap)), __append('" data-option-handler="true">\n            Seleziona\n        </button>\n        '), __line = 31) : (__append('\n        <form action="'), __line = 32, __append(escapeFn(e.endpoint)), __append('" method="POST" name="updateshipping-form" data-component="updateShippingComponent" data-xhr="true" data-option-timeslot-enabled="true">\n\n            '), __line = 34, e.store.tobemapped && (__append('\n              <input type="hidden" name="tobemapped" value="true" />\n            '), __line = 36), __append('\n            <input type="hidden" name="shippingMethodId" value="'), __line = 37, __append(escapeFn(e.shippingMethodId)), __append('" />\n            <input type="hidden" name="storeId" value="'), __line = 38, __append(escapeFn(e.store.id)), __append('" />\n            <input type="hidden" name="city" value="'), __line = 39, __append(escapeFn(e.city)), __append('" />\n            <input type="hidden" name="cap" value="'), __line = 40, __append(escapeFn(e.cap)), __append('" />\n            <input type="hidden" name="address" value="'), __line = 41, __append(escapeFn(e.address)), __append('" />\n            <input type="hidden" name="state" value="'), __line = 42, __append(escapeFn(e.state)), __append('" />\n            <input type="hidden" name="streetNumber" value="'), __line = 43, __append(escapeFn(e.streetNumber)), __append('" />\n            <button type="submit" class="select-service">Seleziona</button>\n        </form>\n        '), __line = 46), __append("\n        "), __line = 47, e && e.store && e.store.iconNewServices && e.store.iconNewServices.length > 0 && e.store.iconNewServices.includes(e.shippingMethodId) && !e.hasExtraDeliveryServices && (__append('\n          <span class="service-new-icon">novità</span>\n        '), __line = 49), __append("\n    </div>\n    "), __line = 51, e.hasExtraDeliveryServices && e.extraDeliveryLayer ? (__append('\n    <div class="extra-delivery-back-container">\n        <button\n            type="button"\n            data-component="togglerComponent"\n            data-option-name="openExtraLayer-'), __line = 56, __append(escapeFn(e.shippingMethodId)), __append('"\n            data-option-handler="true"\n            class="back-to-services"\n        >\n            <i class="icon-arrow"></i>\n            '), __line = 61, __append(escapeFn(e.shippingMethodName.toUpperCase())), __append('\n        </button>\n        <p class="back-to-services description openExtraLayer-'), __line = 63, __append(escapeFn(e.shippingMethodId)), __append(' toggleActive extra" data-label-default="Scegli il servizio più adatto a te" data-label-toggle="Prenota giorno e orario di consegna">Scegli il servizio più adatto a te</p>\n    </div>\n    <ul class="stores-list extra-delivery-list" data-component="togglerComponent" data-option-name="openExtraLayer-'), __line = 65, __append(escapeFn(e.shippingMethodId)), __append('" data-option-target="true">\n        '), __line = 66, __append(e.extraDeliveryLayer), __append("    </ul>\n    "), __line = 68) : e.stores && e.stores.length > 0 && (__append('\n    <div class="extra-delivery-back-container">\n        <button\n            type="button"\n            data-component="togglerComponent"\n            data-option-name="openStoresList-'), __line = 73, __append(escapeFn(e.shippingMethodId)), __append('"\n            data-option-handler="true"\n            class="back-to-services"\n        >\n        <i class="icon-arrow"></i>\n        '), __line = 78, __append(escapeFn(e.shippingMethodName.toUpperCase())), __append('\n        </button>\n        <p class="back-to-services description openStoresList-'), __line = 80, __append(escapeFn(e.shippingMethodId)), __append(' toggleActive list" data-label-default="Seleziona il punto di ritiro" data-label-toggle="Prenota giorno e orario di ritiro" tabindex="-1">Seleziona il punto di ritiro</p>\n    </div>\n    <ul class="stores-list" data-component="togglerComponent" data-option-name="openStoresList-'), __line = 82, __append(escapeFn(e.shippingMethodId)), __append('" data-option-target="true">\n      <li>\n        <button class="btn button-change-store js-change-store d-none"><img src="'), __line = 84, __append(escapeFn(e.storeIcon)), __append('" alt=""></i>Cambia punto vendita</button>\n      </li>\n      \x3c!-- <p class="section-title">Seleziona il punto di ritiro</p> --\x3e\n    \x3c!--     <div class="banner-spalla-cap">\n          <img src="">\n          <div class="banner-spalla-text">\n          <h4>NOVITÀ STORE TERRE D\'ITALIA</h4>\n          <p>Da oggi puoi ritirare la tua spesa direttamente \n          in Piazza De Angeli 5</p>\n          </div>\n        </div> --\x3e\n        '), __line = 95, bannerOptions && bannerOptions.storesListBanner && (__append('\n        <li>\n         <form action="'), __line = 97, __append(escapeFn(e.endpoint)), __append('" method="POST" name="updateshipping-form" data-component="updateShippingComponent" data-xhr="true" data-option-timeslot-enabled="true">\n           \n             '), __line = 99, __append(bannerOptions.storesListBanner), __append("\n         </form>\n        </li>\n        "), __line = 103), __append("\n        "), __line = 104, e.stores.forEach(function(n) {
                            __append("\n          "), __line = 105, bannerOptions && bannerOptions.excludestore && bannerOptions.excludestore === n.id || (__append('\n        <li class="store-card js-store-card store-card-wrapper '), __line = 106, __append(escapeFn(n.brand)), __append(" "), __append(escapeFn(n.iconNewServices && n.iconNewServices.length > 0 && n.iconNewServices.includes(e.shippingMethodId) ? "store-service-new" : "")), __append('">\n            <p class="store-details store-card-toggle" data-component="timeslotsTogglerComponent" data-option-shipping-selected-cap="'), __line = 107, __append(escapeFn(n.postalCode)), __append('" data-option-selected-store-id="'), __append(escapeFn(n.id)), __append('" data-option-endpoint="'), __append(escapeFn(e.getTimeslotsEndpoint)), __append('" data-option-error-icon-url="'), __append(escapeFn(e.errorIconUrl)), __append('" data-option-store-id="'), __append(escapeFn(n.id)), __append('" data-option-method-id="'), __append(escapeFn(e.shippingMethodId)), __append('" data-option-name="deliveryToggle-'), __append(escapeFn(e.shippingMethodId)), __append("-"), __append(escapeFn(n.id)), __append('" data-option-handler="true" tabindex="0" role="button" aria-pressed="false" data-option-service-type="list" data-option-cap="'), __append(escapeFn(n.postalCode)), __append('" data-option-city="'), __append(escapeFn(n.city)), __append('"><span>'), __append(escapeFn(n.address1)), __append("</span>"), __append(escapeFn(n.postalCode)), __append(" - "), __append(escapeFn(n.city)), __append(" ("), __append(escapeFn(n.countryCode)), __append(')</p>\n            \n            <div class="store-card-wrapper--content" data-option-name="deliveryToggle-'), __line = 109, __append(escapeFn(e.shippingMethodId)), __append("-"), __append(escapeFn(n.id)), __append('">\n              <div class="js-store-card-timeslot"></div>\n              <div class="inline-tooltip">\n                <i class="inline-tooltip--icon icon-fl-info"></i>\n                <p class="inline-tooltip--text">\n                  '), __line = 114, n.isFranchising ? (__append("\n                    Pagamento con buoni pasto o giftcard <b>non disponibile</b>\n                  "), __line = 118) : (__append("\n                    Pagamento con buoni pasto o giftcard <b>disponibile</b>\n                  "), __line = 116), __append("\n                </p>\n              </div>\n              "), __line = 121, e.userLogged || (__append('\n                <div class="inline-tooltip bg-functional-warning js-hide-if-service-unavailable">\n                  <i class="inline-tooltip--icon icon-user-check"></i>\n                  <p class="inline-tooltip--text">\n                    Per confermare la prenotazione della fascia oraria è necessario <b>effettuare il login</b>\n                  </p>\n                </div>\n              '), __line = 128), __append('\n              <div class="store-card-button-wrapper js-next-step">\n                <form action="'), __line = 130, __append(escapeFn(e.endpoint)), __append('" method="POST" name="updateshipping-form" data-component="updateShippingComponent" data-xhr="true" data-option-timeslot-enabled="true">\n                  '), __line = 131, n.tobemapped && (__append('\n                    <input type="hidden" name="tobemapped" value="true" />\n                  '), __line = 133), __append('\n                    <input type="hidden" name="shippingMethodId" value="'), __line = 134, __append(escapeFn(e.shippingMethodId)), __append('" />\n                    <input type="hidden" name="storeId" value="'), __line = 135, __append(escapeFn(n.id)), __append('" />\n                    <input type="hidden" name="city" value="'), __line = 136, __append(escapeFn(n.city)), __append('" />\n                    <input type="hidden" name="cap" value="'), __line = 137, __append(escapeFn(n.postalCode)), __append('" />\n                    <button type="submit" class="btn btn-secondary small" data-option-service-available="true">Scegli più tardi</button>\n                  </form>\n                <div class="tooltipArea js-hide-if-service-unavailable">\n                  <button class="btn btn-primary small js-next js-timeslot-submit" data-option-endpoint="'), __line = 141, __append(escapeFn(e.reserveTimeslotsEndpoint)), __append('" aria-disabled="true">'), __append(escapeFn(e.userLogged ? "Conferma" : "Accedi")), __append('</button>\n                  <div role="tooltip" class="tooltipBox">\n                    <span class="tooltipInnerText">Seleziona una fascia oraria per poter prenotare la consegna.</span>\n                  </div>\n                </div>\n              </div>\n\n            </div>\n            '), __line = 149, n.iconNewServices && n.iconNewServices.length > 0 && n.iconNewServices.includes(e.shippingMethodId) && (__append('\n              <span class="service-new-icon">novità</span>\n            '), __line = 151), __append("\n            </li>\n        "), __line = 153), __append("\n        "), __line = 154
                        }), __append('\n      </ul>\n    <div class="message-box">\n        <h4>Come funziona?</h4>\n        <p>'), __line = 158, __append(e.shippingMethodDescription), __append(e.extraDescription), __append("</p>\n    </div>\n    "), __line = 160), __append(" \n\n    "), __line = 162, e.store && e.storesDelivery && 1 === e.storesDelivery.length && (__append('\n        <div class="extra-delivery-back-container">\n          <button\n              type="button"\n              data-component="togglerComponent"\n              data-option-name="openSingleStoreDeliveryList"\n              data-option-handler="true"\n              class="back-to-services franchise"\n          >\n          <i class="icon-arrow"></i>\n          '), __line = 172, __append(escapeFn(e.shippingMethodName.toUpperCase())), __append('\n          </button>\n          <p class="back-to-services franchise description openSingleStoreDeliveryList toggleActive single" data-label-default="Prenota giorno e orario di consegna" data-label-toggle="Prenota giorno e orario di consegna">Prenota giorno e orario di consegna</p>\n        </div>\n      <ul class="stores-list franchise-list single-store-list" data-component="togglerComponent" data-option-name="openSingleStoreDeliveryList" data-option-target="true">\n        <div class="store-card js-store-card store-card-wrapper '), __line = 177, __append(escapeFn(e.store.brand)), __append(" "), __append(escapeFn(e.store.iconNewServices && e.store.iconNewServices.length > 0 && e.store.iconNewServices.includes(e.shippingMethodId) ? "store-service-new" : "")), __append('"\n          >\n          <p class="store-details store-card-toggle" data-component="timeslotsTogglerComponent" data-option-shipping-selected-cap="'), __line = 179, __append(escapeFn(e.store.postalCode)), __append('" data-option-selected-store-id="'), __append(escapeFn(e.store.id)), __append('" data-option-endpoint="'), __append(escapeFn(e.getTimeslotsEndpoint)), __append('" data-option-error-icon-url="'), __append(escapeFn(e.errorIconUrl)), __append('" data-option-store-id="'), __append(escapeFn(e.store.id)), __append('" data-option-method-id="'), __append(escapeFn(e.shippingMethodId)), __append('" data-option-name="deliveryToggle-'), __append(escapeFn(e.store.id)), __append('" data-option-handler="true" tabindex="0" role="button" aria-pressed="false" data-option-service-type="single" data-option-cap="'), __append(escapeFn(e.cap)), __append('" data-option-city="'), __append(escapeFn(e.city)), __append('"><span>'), __append(escapeFn(e.store.address1)), __append("</span>"), __append(escapeFn(e.store.postalCode)), __append(" - "), __append(escapeFn(e.store.city)), __append(" ("), __append(escapeFn(e.store.countryCode)), __append(")</p>\n          "), __line = 180, e.store.iconNewServices && e.store.iconNewServices.length > 0 && e.store.iconNewServices.includes(e.shippingMethodId) && (__append('\n            <span class="service-new-icon">novità</span>\n          '), __line = 182), __append('\n            <div class="store-card-wrapper--content" data-option-name="deliveryToggle-'), __line = 183, __append(escapeFn(e.store.id)), __append('">\n\n              <div class="js-store-card-timeslot"></div>\n\n              <div class="inline-tooltip">\n                <i class="inline-tooltip--icon icon-fl-info"></i>\n                <p class="inline-tooltip--text">\n                  '), __line = 190, "delivery" === e.shippingMethodId ? (__append("\n                    Pagamento con buoni pasto o giftcard <b>disponibile</b>\n                  "), __line = 192) : "deliveryExpress" === e.shippingMethodId && (__append("\n                    Pagamento con buoni pasto o giftcard <b>non disponibile</b>\n                  "), __line = 194), __append("\n                </p>\n              </div>\n              "), __line = 197, e.userLogged || (__append('\n                <div class="inline-tooltip bg-functional-warning js-hide-if-service-unavailable">\n                  <i class="inline-tooltip--icon icon-user-check"></i>\n                  <p class="inline-tooltip--text">\n                    Per confermare la prenotazione della fascia oraria è necessario <b>effettuare il login</b>\n                  </p>\n                </div>\n              '), __line = 204), __append('\n\n\n              <div class="store-card-button-wrapper js-next-step">\n                <form action="'), __line = 208, __append(escapeFn(e.endpoint)), __append('" method="POST" name="updateshipping-form" data-component="updateShippingComponent" data-xhr="true" data-option-timeslot-enabled="true">\n                  '), __line = 209, e.store.tobemapped && (__append('\n                    <input type="hidden" name="tobemapped" value="true" />\n                  '), __line = 211), __append('\n                    <input type="hidden" name="shippingMethodId" value="'), __line = 212, __append(escapeFn(e.shippingMethodId)), __append('" />\n                    <input type="hidden" name="storeId" value="'), __line = 213, __append(escapeFn(e.store.id)), __append('" />\n                    <input type="hidden" name="city" value="'), __line = 214, __append(escapeFn(e.city)), __append('" />\n                    <input type="hidden" name="cap" value="'), __line = 215, __append(escapeFn(e.cap)), __append('" />\n                    <input type="hidden" name="address" value="'), __line = 216, __append(escapeFn(e.address)), __append('" />\n                    <input type="hidden" name="state" value="'), __line = 217, __append(escapeFn(e.state)), __append('" />\n                    <input type="hidden" name="streetNumber" value="'), __line = 218, __append(escapeFn(e.streetNumber)), __append('" />\n                    <button type="submit" class="btn btn-secondary small" data-option-service-available="true">Scegli più tardi</button>\n                </form>\n                <div class="tooltipArea js-hide-if-service-unavailable">\n                  <button class="btn btn-primary small js-next js-timeslot-submit" data-option-endpoint="'), __line = 222, __append(escapeFn(e.reserveTimeslotsEndpoint)), __append('" aria-disabled="true">'), __append(escapeFn(e.userLogged ? "Conferma" : "Accedi")), __append('</button>\n                  <div role="tooltip" class="tooltipBox">\n                    <span class="tooltipInnerText">Seleziona una fascia oraria per poter prenotare la consegna.</span>\n                  </div>\n                </div>\n              </div>\n\n\n            </div>\n        </div>\n        '), __line = 232, e.deliveryCostContentAsset && (__append('\n          <div class="external-delivery-card">\n            '), __line = 234, __append(e.deliveryCostContentAsset), __append("          </div>\n        "), __line = 236), __append("\n        </ul>\n      "), __line = 238), __append(" \n\n    "), __line = 240, e.storesFranchising && e.storesFranchising.length > 0 && (__append('\n      <div class="extra-delivery-back-container">\n          <button\n              type="button"\n              data-component="togglerComponent"\n              data-option-name="openStoresListFranchising"\n              data-option-handler="true"\n              class="back-to-services franchise"\n          >\n          <i class="icon-arrow"></i>\n          '), __line = 250, __append(escapeFn(e.shippingMethodName.toUpperCase())), __append('\n          </button>\n          <p class="back-to-services franchise description openStoresListFranchising toggleActive" data-label-default="Seleziona il punto vendita" data-label-toggle="Prenota giorno e orario di consegna">Seleziona il punto vendita</p>\n        </div>\n      <ul class="stores-list franchise-list" data-component="togglerComponent" data-option-name="openStoresListFranchising" data-option-target="true">\n          \x3c!-- <p class="section-title">Seleziona il punto vendita</p> --\x3e\n          '), __line = 256, e.storesFranchising.forEach(function(n) {
                            __append('\n            \x3c!--WIP--\x3e\n              <li class="store-card js-store-card store-card-wrapper '), __line = 258, __append(escapeFn(n.brand)), __append(" "), __append(escapeFn(n.iconNewServices && n.iconNewServices.length > 0 && n.iconNewServices.includes(e.shippingMethodId) ? "store-service-new" : "")), __append('"\n                >\n                <p class="store-details store-card-toggle" data-component="timeslotsTogglerComponent" data-option-shipping-selected-cap="'), __line = 260, __append(escapeFn(e.cap)), __append('" data-option-selected-store-id="'), __append(escapeFn(n.id)), __append('" data-option-endpoint="'), __append(escapeFn(e.getTimeslotsEndpoint)), __append('" data-option-error-icon-url="'), __append(escapeFn(e.errorIconUrl)), __append('" data-option-store-id="'), __append(escapeFn(n.id)), __append('" data-option-method-id="'), __append(escapeFn(e.shippingMethodId)), __append('" data-option-name="deliveryToggle-'), __append(escapeFn(n.id)), __append('" data-option-handler="true" tabindex="0" role="button" aria-pressed="false" data-option-service-type="franchise" data-option-cap="'), __append(escapeFn(e.cap)), __append('" data-option-city="'), __append(escapeFn(e.city)), __append('"><span>'), __append(escapeFn(n.address1)), __append("</span>"), __append(escapeFn(n.postalCode)), __append(" - "), __append(escapeFn(n.city)), __append(" ("), __append(escapeFn(n.countryCode)), __append(")</p>\n                "), __line = 261, n.iconNewServices && n.iconNewServices.length > 0 && n.iconNewServices.includes(e.shippingMethodId) && (__append('\n                  <span class="service-new-icon">novità</span>\n                '), __line = 263), __append('\n                  <div class="store-card-wrapper--content" data-option-name="deliveryToggle-'), __line = 264, __append(escapeFn(n.id)), __append('">\n\n                    <div class="js-store-card-timeslot"></div>\n\n                    <div class="inline-tooltip">\n                      <i class="inline-tooltip--icon icon-fl-info"></i>\n                      <p class="inline-tooltip--text">\n                        '), __line = 271, "delivery" === e.shippingMethodId ? (__append("\n                          Pagamento con buoni pasto o giftcard <b>disponibile</b>\n                        "), __line = 273) : "deliveryExpress" === e.shippingMethodId && (__append("\n                          Pagamento con buoni pasto o giftcard <b>non disponibile</b>\n                        "), __line = 275), __append("                      </p>\n                    </div>\n                    "), __line = 277, e.userLogged || (__append('\n                      <div class="inline-tooltip bg-functional-warning js-hide-if-service-unavailable">\n                        <i class="inline-tooltip--icon icon-user-check"></i>\n                        <p class="inline-tooltip--text">\n                          Per confermare la prenotazione della fascia<br> oraria è necessario <b>effettuare il login</b>\n                        </p>\n                      </div>\n                    '), __line = 284), __append('\n\n\n                    <div class="store-card-button-wrapper js-next-step">\n                      <form action="'), __line = 288, __append(escapeFn(e.endpoint)), __append('" method="POST" name="updateshipping-form" data-component="updateShippingComponent" data-xhr="true" data-option-timeslot-enabled="true">\n                        '), __line = 289, n.tobemapped && (__append('\n                          <input type="hidden" name="tobemapped" value="true" />\n                        '), __line = 291), __append('\n                          <input type="hidden" name="shippingMethodId" value="deliveryExpress" />\n                          <input type="hidden" name="storeId" value="'), __line = 293, __append(escapeFn(n.id)), __append('" />\n                          <input type="hidden" name="city" value="'), __line = 294, __append(escapeFn(e.city)), __append('" />\n                          <input type="hidden" name="cap" value="'), __line = 295, __append(escapeFn(e.cap)), __append('" />\n                          <input type="hidden" name="address" value="'), __line = 296, __append(escapeFn(e.address)), __append('" />\n                          <input type="hidden" name="state" value="'), __line = 297, __append(escapeFn(e.state)), __append('" />\n                          <input type="hidden" name="streetNumber" value="'), __line = 298, __append(escapeFn(e.streetNumber)), __append('" />\n                          <button type="submit" class="btn btn-secondary small" data-option-service-available="true">Scegli più tardi</button>\n                      </form>\n                      <div class="tooltipArea js-hide-if-service-unavailable">\n                        <button class="btn btn-primary small js-next js-timeslot-submit" data-option-endpoint="'), __line = 302, __append(escapeFn(e.reserveTimeslotsEndpoint)), __append('" aria-disabled="true">'), __append(escapeFn(e.userLogged ? "Conferma" : "Accedi")), __append('</button>\n                        <div role="tooltip" class="tooltipBox">\n                          <span class="tooltipInnerText">Seleziona una fascia oraria per poter prenotare la consegna.</span>\n                        </div>\n                      </div>\n\n                    </div>\n    \n\n                  </div>\n                </li>\n\n\n          '), __line = 315
                        }), __append("\n          "), __line = 316, e.deliveryCostContentAsset && (__append('\n            <div class="external-delivery-card">\n              '), __line = 318, __append(e.deliveryCostContentAsset), __append("            </div>\n          "), __line = 320), __append("\n          </ul>\n      "), __line = 322, e.franchiseListContent && (__append('\n      <div class="message-box">\n          <h4>Come funziona?</h4>\n          <p>'), __line = 325, __append(e.franchiseListContent), __append("</p>\n      </div>\n      "), __line = 327), __append("\n      "), __line = 328), __append(" ")
                    }), __append(" ")) : "undefined" != typeof capList && capList.length > 0 ? (__append('\n    <div class="store-service-card with-bg">\n        <p class="warning-msg">'), __line = 330, __append(selectLabel), __append('</p>\n        <div class="select">\n            <select id="storelist" data-component="storeListComponent" data-option-el="cap">\n                <option value="-">'), __line = 333, __append(escapeFn(selectPlaceholder)), __append("</option>\n                "), __line = 334, capList.forEach(function(e) {
                        __append('\n                <option value="'), __line = 335, __append(escapeFn(e.cap)), __append('">'), __append(escapeFn(e.cap)), __append(" - "), __append(escapeFn(e.city)), __append("</option>\n                "), __line = 336
                    }), __append("\n            </select>\n        </div>\n    </div>\n    "), __line = 340, warningCityCap && (__append('\n    <div class="store-service-card city-cap-warning with-bg with-border fixed-bottom">\n      <p class="information-msg">'), __line = 342, __append(escapeFn(warningCityCap)), __append("</p>\n    </div>\n    "), __line = 344), __append("\n    "), __line = 345) : "undefined" != typeof cityList && cityList.length > 0 ? (__append('\n    <div class="store-service-card with-bg">\n        <p class="warning-msg">'), __line = 347, __append(selectLabel), __append('</p>\n        <div class="select">\n            <select id="storelist" data-component="storeListComponent" data-option-el="city">\n                <option value="-">'), __line = 350, __append(escapeFn(selectPlaceholder)), __append("</option>\n                "), __line = 351, cityList.forEach(function(e) {
                        __append('\n                <option value="'), __line = 352, __append(escapeFn(e.city)), __append('">'), __append(escapeFn(e.cap)), __append(" - "), __append(escapeFn(e.city)), __append("</option>\n                "), __line = 353
                    }), __append("\n            </select>\n        </div>\n    </div>\n    "), __line = 357, warningCityCap && (__append('\n      <div class="store-service-card city-cap-warning with-bg with-border fixed-bottom">\n        <p class="information-msg">'), __line = 359, __append(escapeFn(warningCityCap)), __append("</p>\n      </div>\n    "), __line = 361), __append("\n    "), __line = 362) : (__append('\n    <div class="store-service-card with-bg">\n        <p class="warning-msg">'), __line = 364, __append(escapeFn(msg)), __append("</p>\n    </div>\n    "), __line = 366), __append("\n</div>\n"), __line = 368;
                    return __output
                } catch (e) {
                    rethrow(e, __lines, __filename, __line, escapeFn)
                }
            }
        }
    }
]);